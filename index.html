<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>VMU Icon Maker</title>
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="styles.css">
    <script src="libs/three.min.js"></script>
    <script src="libs/jszip.min.js"></script>
</head>
<body>
    <div id="dreamcast-background"></div>
    <div id="head-area">
        <h1>VMU Icon Maker</h1>
        <div id="clock"></div>
    </div>
    <div id="content-area">
        <div id="open-area">
            <label for="unified-file" id="unified-file-label">
                <span>
                    DRAG & DROP IMAGES OR VMU FILES ANYWHERE
                    <br>
                    <small>(.vms, .dci, .dcm, .psv, .bmp, .png, .jpg, .gif, .ico, .webp)</small>
                </span>
                <div class="button">OR CLICK HERE</div>
            </label>
            <input type="file" id="unified-file" accept=".vms, .dci, .dcm, .psv, .bmp, .png, .jpg, .jpeg, .gif, .ico, .webp" style="display: none;" />
        </div>
        <div id="color-area">
            <div class="inline-container">
                <h3>Color</h3>
                <label for="color-file" class="option-button">+ Image</label>
                <input type="file" id="color-file" accept=".ico, .bmp, .png, .jpeg, .jpg, .gif, .webp">
            </div>
            <canvas id="color-canvas" width="320" height="320" class="transparent-bg"></canvas>
            <div class="palette-area">
                <div id="color-indicators">
                    <div class="color-indicator">
                        <span id="secondary-color-indicator" style="background-color: rgb(255, 255, 255);"></span>
                    </div>
                    <div class="color-indicator">
                        <span id="primary-color-indicator" style="background-color: rgb(0, 0, 0);"></span>
                    </div>
                </div>
                <div id="color-palette" style="display: grid; grid-template-columns: repeat(8, 26px); gap: 0px; border: 1px solid rgb(0, 0, 0); border-radius: 2px;">
                    <div id="color-palette-item-index-0" style="width: 24px; height: 24px; background-color: rgb(0, 0, 0); cursor: pointer; border: 1px solid rgb(0, 0, 0); position: relative;"><input type="color" data-alpha="ff" style="position: absolute; top: 0px; left: 0px; width: 100%; height: 100%; opacity: 0; pointer-events: none;"></div>
                    <div id="color-palette-item-index-1" style="width: 24px; height: 24px; background-color: rgb(255, 255, 255); cursor: pointer; border: 1px solid rgb(0, 0, 0); position: relative;"><input type="color" data-alpha="ff" style="position: absolute; top: 0px; left: 0px; width: 100%; height: 100%; opacity: 0; pointer-events: none;"></div>
                    <div id="color-palette-item-index-2" style="width: 24px; height: 24px; background-color: rgb(255, 0, 0); cursor: pointer; border: 1px solid rgb(0, 0, 0); position: relative;"><input type="color" data-alpha="ff" style="position: absolute; top: 0px; left: 0px; width: 100%; height: 100%; opacity: 0; pointer-events: none;"></div>
                    <div id="color-palette-item-index-3" style="width: 24px; height: 24px; background-color: rgb(0, 255, 0); cursor: pointer; border: 1px solid rgb(0, 0, 0); position: relative;"><input type="color" data-alpha="ff" style="position: absolute; top: 0px; left: 0px; width: 100%; height: 100%; opacity: 0; pointer-events: none;"></div>
                    <div id="color-palette-item-index-4" style="width: 24px; height: 24px; background-color: rgb(0, 0, 255); cursor: pointer; border: 1px solid rgb(0, 0, 0); position: relative;"><input type="color" data-alpha="ff" style="position: absolute; top: 0px; left: 0px; width: 100%; height: 100%; opacity: 0; pointer-events: none;"></div>
                    <div id="color-palette-item-index-5" style="width: 24px; height: 24px; background-color: rgb(255, 255, 0); cursor: pointer; border: 1px solid rgb(0, 0, 0); position: relative;"><input type="color" data-alpha="ff" style="position: absolute; top: 0px; left: 0px; width: 100%; height: 100%; opacity: 0; pointer-events: none;"></div>
                    <div id="color-palette-item-index-6" style="width: 24px; height: 24px; background-color: rgb(0, 255, 255); cursor: pointer; border: 1px solid rgb(0, 0, 0); position: relative;"><input type="color" data-alpha="ff" style="position: absolute; top: 0px; left: 0px; width: 100%; height: 100%; opacity: 0; pointer-events: none;"></div>
                    <div id="color-palette-item-index-7" style="width: 24px; height: 24px; background-color: rgb(255, 0, 255); cursor: pointer; border: 1px solid rgb(0, 0, 0); position: relative;"><input type="color" data-alpha="ff" style="position: absolute; top: 0px; left: 0px; width: 100%; height: 100%; opacity: 0; pointer-events: none;"></div>
                    <div id="color-palette-item-index-8" style="width: 24px; height: 24px; background-color: rgb(187, 187, 187); cursor: pointer; border: 1px solid rgb(0, 0, 0); position: relative;"><input type="color" data-alpha="ff" style="position: absolute; top: 0px; left: 0px; width: 100%; height: 100%; opacity: 0; pointer-events: none;"></div>
                    <div id="color-palette-item-index-9" style="width: 24px; height: 24px; background-color: rgb(136, 136, 136); cursor: pointer; border: 1px solid rgb(0, 0, 0); position: relative;"><input type="color" data-alpha="ff" style="position: absolute; top: 0px; left: 0px; width: 100%; height: 100%; opacity: 0; pointer-events: none;"></div>
                    <div id="color-palette-item-index-10" style="width: 24px; height: 24px; background-color: rgb(136, 0, 0); cursor: pointer; border: 1px solid rgb(0, 0, 0); position: relative;"><input type="color" data-alpha="ff" style="position: absolute; top: 0px; left: 0px; width: 100%; height: 100%; opacity: 0; pointer-events: none;"></div>
                    <div id="color-palette-item-index-11" style="width: 24px; height: 24px; background-color: rgb(136, 136, 0); cursor: pointer; border: 1px solid rgb(0, 0, 0); position: relative;"><input type="color" data-alpha="ff" style="position: absolute; top: 0px; left: 0px; width: 100%; height: 100%; opacity: 0; pointer-events: none;"></div>
                    <div id="color-palette-item-index-12" style="width: 24px; height: 24px; background-color: rgb(0, 136, 0); cursor: pointer; border: 1px solid rgb(0, 0, 0); position: relative;"><input type="color" data-alpha="ff" style="position: absolute; top: 0px; left: 0px; width: 100%; height: 100%; opacity: 0; pointer-events: none;"></div>
                    <div id="color-palette-item-index-13" style="width: 24px; height: 24px; background-color: rgb(136, 0, 136); cursor: pointer; border: 1px solid rgb(0, 0, 0); position: relative;"><input type="color" data-alpha="ff" style="position: absolute; top: 0px; left: 0px; width: 100%; height: 100%; opacity: 0; pointer-events: none;"></div>
                    <div id="color-palette-item-index-14" style="width: 24px; height: 24px; background-color: rgb(0, 136, 136); cursor: pointer; border: 1px solid rgb(0, 0, 0); position: relative;"><input type="color" data-alpha="ff" style="position: absolute; top: 0px; left: 0px; width: 100%; height: 100%; opacity: 0; pointer-events: none;"></div>
                    <div id="color-palette-item-index-15" style="width: 24px; height: 24px; background-color: rgb(0, 0, 136); cursor: pointer; border: 1px solid rgb(0, 0, 0); position: relative;"><input type="color" data-alpha="ff" style="position: absolute; top: 0px; left: 0px; width: 100%; height: 100%; opacity: 0; pointer-events: none;"></div>
                </div>
            </div>
        </div>
        <div id="mono-area">
            <div class="inline-container">
                <h3>Monochrome</h3>
                <label id="clear-mono-button" class="option-button">Clear</label>
                <label id="invert-mono-button" class="option-button">Invert</label>
                <label for="mono-file" class="option-button">+ Image</label>
                <input type="file" id="mono-file" accept=".ico, .bmp, .png, .jpeg, .jpg, .gif, .webp">
            </div>
            <canvas id="mono-canvas" width="320" height="320"></canvas>
            <div class="palette-area">
                <div id="mono-color-indicators">
                    <div id="mono-secondary-color-indicator" class="color-indicator" style="background: linear-gradient(rgb(138, 248, 219), rgb(104, 163, 143)); box-shadow: none;"></div>
                    <div id="mono-primary-color-indicator" class="color-indicator" style="background: rgb(29, 71, 129); box-shadow: rgb(138, 248, 219) 0px 0px 0px 1px inset, rgb(29, 71, 129) 0px 0px 0px 3px inset;"></div>
                </div>
                <div id="mono-palette" style="display: grid; grid-template-columns: repeat(8, 26px); gap: 0px; border: 1px solid rgb(0, 0, 0); border-radius: 2px;">
                    <div id="mono-palette-item-index-0" style="width: 24px; height: 24px; border: 1px solid rgb(0, 0, 0); cursor: pointer; position: relative; background: linear-gradient(rgb(138, 248, 219), rgb(104, 163, 143));"><div style="position: absolute; top: 5px; left: 5px; width: 14px; height: 14px; background-color: transparent;"></div></div>
                    <div id="mono-palette-item-index-1" style="width: 24px; height: 24px; border: 1px solid rgb(0, 0, 0); cursor: pointer; position: relative; background: linear-gradient(rgb(138, 248, 219), rgb(104, 163, 143));"><div style="position: absolute; top: 5px; left: 5px; width: 14px; height: 14px; background-color: transparent;"></div></div>
                    <div id="mono-palette-item-index-2" style="width: 24px; height: 24px; border: 1px solid rgb(0, 0, 0); cursor: pointer; position: relative; background: linear-gradient(rgb(138, 248, 219), rgb(104, 163, 143));"><div style="position: absolute; top: 5px; left: 5px; width: 14px; height: 14px; background-color: transparent;"></div></div>
                    <div id="mono-palette-item-index-3" style="width: 24px; height: 24px; border: 1px solid rgb(0, 0, 0); cursor: pointer; position: relative; background: linear-gradient(rgb(138, 248, 219), rgb(104, 163, 143));"><div style="position: absolute; top: 5px; left: 5px; width: 14px; height: 14px; background-color: transparent;"></div></div>
                    <div id="mono-palette-item-index-4" style="width: 24px; height: 24px; border: 1px solid rgb(0, 0, 0); cursor: pointer; position: relative; background: linear-gradient(rgb(138, 248, 219), rgb(104, 163, 143));"><div style="position: absolute; top: 5px; left: 5px; width: 14px; height: 14px; background-color: transparent;"></div></div>
                    <div id="mono-palette-item-index-5" style="width: 24px; height: 24px; border: 1px solid rgb(0, 0, 0); cursor: pointer; position: relative; background: linear-gradient(rgb(138, 248, 219), rgb(104, 163, 143));"><div style="position: absolute; top: 5px; left: 5px; width: 14px; height: 14px; background-color: transparent;"></div></div>
                    <div id="mono-palette-item-index-6" style="width: 24px; height: 24px; border: 1px solid rgb(0, 0, 0); cursor: pointer; position: relative; background: linear-gradient(rgb(138, 248, 219), rgb(104, 163, 143));"><div style="position: absolute; top: 5px; left: 5px; width: 14px; height: 14px; background-color: transparent;"></div></div>
                    <div id="mono-palette-item-index-7" style="width: 24px; height: 24px; border: 1px solid rgb(0, 0, 0); cursor: pointer; position: relative; background: linear-gradient(rgb(138, 248, 219), rgb(104, 163, 143));"><div style="position: absolute; top: 5px; left: 5px; width: 14px; height: 14px; background-color: transparent;"></div></div>
                    <div id="mono-palette-item-index-8" style="width: 24px; height: 24px; border: 1px solid rgb(0, 0, 0); cursor: pointer; position: relative; background: linear-gradient(rgb(138, 248, 219), rgb(104, 163, 143));"><div style="position: absolute; top: 5px; left: 5px; width: 14px; height: 14px; background-color: transparent;"></div></div>
                    <div id="mono-palette-item-index-9" style="width: 24px; height: 24px; border: 1px solid rgb(0, 0, 0); cursor: pointer; position: relative; background: linear-gradient(rgb(138, 248, 219), rgb(104, 163, 143));"><div style="position: absolute; top: 5px; left: 5px; width: 14px; height: 14px; background-color: transparent;"></div></div>
                    <div id="mono-palette-item-index-10" style="width: 24px; height: 24px; border: 1px solid rgb(0, 0, 0); cursor: pointer; position: relative; background: linear-gradient(rgb(138, 248, 219), rgb(104, 163, 143));"><div style="position: absolute; top: 5px; left: 5px; width: 14px; height: 14px; background-color: transparent;"></div></div>
                    <div id="mono-palette-item-index-11" style="width: 24px; height: 24px; border: 1px solid rgb(0, 0, 0); cursor: pointer; position: relative; background: linear-gradient(rgb(138, 248, 219), rgb(104, 163, 143));"><div style="position: absolute; top: 5px; left: 5px; width: 14px; height: 14px; background-color: transparent;"></div></div>
                    <div id="mono-palette-item-index-12" style="width: 24px; height: 24px; border: 1px solid rgb(0, 0, 0); cursor: pointer; position: relative; background: linear-gradient(rgb(138, 248, 219), rgb(104, 163, 143));"><div style="position: absolute; top: 5px; left: 5px; width: 14px; height: 14px; background-color: transparent;"></div></div>
                    <div id="mono-palette-item-index-13" style="width: 24px; height: 24px; border: 1px solid rgb(0, 0, 0); cursor: pointer; position: relative; background: linear-gradient(rgb(138, 248, 219), rgb(104, 163, 143));"><div style="position: absolute; top: 5px; left: 5px; width: 14px; height: 14px; background-color: transparent;"></div></div>
                    <div id="mono-palette-item-index-14" style="width: 24px; height: 24px; border: 1px solid rgb(0, 0, 0); cursor: pointer; position: relative; background: linear-gradient(rgb(138, 248, 219), rgb(104, 163, 143));"><div style="position: absolute; top: 5px; left: 5px; width: 14px; height: 14px; background-color: transparent;"></div></div>
                    <div id="mono-palette-item-index-15" style="width: 24px; height: 24px; border: 1px solid rgb(0, 0, 0); cursor: pointer; position: relative; background: linear-gradient(rgb(138, 248, 219), rgb(104, 163, 143));"><div style="position: absolute; top: 5px; left: 5px; width: 14px; height: 14px; background-color: transparent;"></div></div>
                </div>
            </div>
        </div>
        <br>
        <div id="generate-area">
            <div class="option-container">
                <label for="description" class="option-label">Description</label>
                <input type="text" id="description" maxlength="16" placeholder="Description" value="ICONDATA_VMS">
            </div>
            <div class="option-container">
                <input type="checkbox" id="monochrome-only" />
                <label for="monochrome-only">Save Monochrome Icon Only</label>
                <div class="tooltip">
                    Color icon is optional.
                </div>
            </div>
            <div class="option-container">
                <input type="checkbox" id="3d-mode-toggle" />
                <label for="3d-mode-toggle">Set 'Real Mode' Feature Flag</label>
                <div class="tooltip">
                    Enables 3D mode for the Dreamcast BIOS menu
                </div>
            </div>
            <div class="option-container">
                <input type="checkbox" id="share-public" />
                <label for="share-public">Share with DCVMUICONS.net</label>
                <div class="tooltip">
                    Share your icon with the community on DCVMUICONS.net
                </div>
            </div>
            <label for="save-button" class="button" style="margin-top: 8px;">Generate</label>
            <button id="save-button">Save</button>
        </div>
        <div id="description-area">
            <!-- <p><span id="menu-description">&nbsp;</span></p> -->
            <p><span id="boot-rom-description"></span></p>
        </div>
        <div id="custom-color-picker" class="color-picker-container" style="display: none;">
            <div id="color-picker-canvas-container">
                <canvas id="color-picker-canvas" width="235" height="136"></canvas>
            </div>
            <div id="color-preview-container">
                <div id="color-preview"></div>
                <div id="color-sliders">
                    <canvas id="hue-slider" width="150" height="12"></canvas>
                    <canvas id="opacity-slider" width="150" height="12"></canvas>
                </div>
            </div>
            <div id="color-picker-inputs">
                <input type="number" class="color-picker-input" id="red" min="0" max="15">
                <input type="number" class="color-picker-input" id="green" min="0" max="15">
                <input type="number" class="color-picker-input" id="blue" min="0" max="15">
                <input type="number" class="color-picker-input" id="alpha" min="0" max="15">
            </div>
            <div id="color-picker-labels">
                <label for="red" class="color-picker-label">R</label>
                <label for="green" class="color-picker-label">G</label>
                <label for="blue" class="color-picker-label">B</label>
                <label for="alpha" class="color-picker-label">A</label>
            </div>
        </div>
        <div id="history-container" style="display: none;">
            <h3>History</h3>
            <div id="history-list"></div>
        </div>
    </div>
    <script src="app.js"></script>
    <script src="background.js"></script>
</body>
</html>
